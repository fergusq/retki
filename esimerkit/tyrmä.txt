>| _______/| |\       ____           /| __  ____  __
>| \       | | \  /| /    \ |\      / | |/ /____\ \|
>|  \_,   /   \ \/ | | () | | \    /  |   / |  | \
>|    |  :     \   | |  __/ |  \  / | |  |  |__|  |
>|    |  |      \  | |  \   ||\ \/ /| |  |  .__,  |
>|    |  ,  2018 , | | | \  || \  / | |  |  |  |  |
>|    | /  Iikka \ | | |\ : |/  \/  | / /  /    \ |
>|    |/  Hauhio  \| |/  \|         |/ /  /      \|

Tuo tekstiseikkailukirjasto.

>> Nimet

> Määritellään 20 nimeä, joista voidaan arpoa NPC-hahmoille nimiä.
> Mukana on 10 suosituinta naisten nimeä ja 10 suosituinta miesten nimeä.

Nimi on käsite.

Maria on nimi.
Juhani on nimi.
Johannes on nimi.
Olavi on nimi.
Antero on nimi.
Helena on nimi.
Tapani on nimi.
Johanna on nimi.
Anneli on nimi.
Kalevi on nimi.
Tapio on nimi.
Kaarina on nimi.
Matti on nimi.
Mikael on nimi.
Marjatta on nimi.
Ilmari on nimi.
Anna on nimi.
Liisa on nimi.
Annikki on nimi.
Sofia on nimi.

>> Aseet

Ase on esineen alakäsite.
Aseella on voimakkuudeksi kutsuttu kokonaisluku.
Aseen voimakkuus on yleensä 0.

Nyrkki on ase.
Nyrkin voimakkuus on 2.

Ihmisellä on kädessä olevaksi aseeksi kutsuttu ase.
Ihmisen kädessä oleva ase on yleensä nyrkki.

[Aseen] käteen ottaminen on toiminto.
Aseen käteen ottamisen komento on "ota nyt [ase] käteen".
Tulkitse "ota [ase] käteen" aseen käteen ottamisena.

Ennen piilossa olevan aseen käteen ottamista:
	Sano fokalisoijalle "Et näe sellaista asiaa.".
	Keskeytä toiminto.

Ennen aseen käteen ottamista:
	Jos se ei ole fokalisoijan mukana:	
		Sano fokalisoijalle "Sinulla ei ole [sitä].".
		Keskeytä toiminto.

Aseen käteen ottamisen aikana:
	Fokalisoijan kädessä oleva ase on nyt se.

Aseen käteen ottamisen jälkeen:
	Sano fokalisoijalle "Otat [sen] käteesi.".

Esineluettelon tulostamisen jälkeen:
	Jos fokalisoijan kädessä oleva ase on nyrkki:
		Jos fokalisoija on pelaajan ohjaama:
			Sano "Sinulla ei ole mitään asetta kädessäsi.".
		Muulloin:
			Sano "[Fokalisoijalla] ei ole mitään asetta kädessään.".
	Muulloin:
		Jos fokalisoija on pelaajan ohjaama:
			Sano "Sinulla on [fokalisoijan kädessä oleva ase] kädessäsi.".
		Muulloin:
			Sano "[Fokalisoijalla] on [fokalisoijan kädessä oleva ase] kädessään.".

>> Ominaisuudet

Ihminen on joko elävä tai kuollut.
Ihminen on yleensä elävä.

Ihmisellä on terveysluvuksi kutsuttu kokonaisluku.
Ihmisen terveysluku on yleensä 10.

Ihmisellä on voimakkuudeksi kutsuttu kokonaisluku.
Ihmisen voimakkuus on yleensä 2.

Ihmisellä on nopeudeksi kutsuttu kokonaisluku.
Ihmisen nopeus on yleensä 2.

Ihmisen kuvailemisen jälkeen:
	Sano "[rivinvaihto]".
	Sano "TERVEYS: [hänen terveyslukunsa].[rivinvaihto]".
	Sano "VOIMAKKUUS: [hänen voimakkuutensa].[rivinvaihto]".

>> Ruoka

Ruoka-annos on esineen alakäsite.
Ruoka-annos on yleensä syötävä.
Ruoka-annoksella on ruoka-arvoksi kutsuttu kokonaisluku.

Ruoka-annoksen syömisen aikana:
	Fokalisoijan terveysluku on nyt (fokalisoijan terveysluku + sen ruoka-arvo).

Ruoka-annoksen syömisen jälkeen:
	Sano fokalisoijalle "Tunnet hyvinvointisi kasvavan.".

>> Taistelu

> Taistelumekaniikka on yksinkertainen: hyökkääjä ja puolustaja arpovat luvut ja jos hyökääjän luku on suurempi, hyökkäys osuu.
> Hyökkääjän luku perustuu hänen voimakkuuteensa ja aseen ominaisuuksiin, puolustajan luku nopeuteen.
> Jos hyökkäys osuu, vahinko arvotaan samalla tavalla kuin edellinenkin hyökkääjän luku.

Aiheutettu vahinko on kokonaisluku.
Aiheutettu vahinko on alussa 0.

Lyöntiheitto on kokonaisluku.
Lyöntiheitto on alussa 0.

Väistöheitto on kokonaisluku.
Väistöheitto on alussa 0.

Ihmistä (vihollinen) vastaan hyökkäämisen aikana:
	Lyöntiheitto on nyt satunnaisluku välillä 1:stä fokalisoijan voimakkuuteen.
	Väistöheitto on nyt satunnaisluku välillä 1:sta vihollisen nopeuteen.
	Sano "LH: [lyöntiheitto] VH: [väistöheitto]".
	Jos lyöntiheitto on suurempi kuin väistöheitto:
		Aiheutettu vahinko on nyt satunnaisluku välillä 1:stä (fokalisoijan voimakkuus + fokalisoijan kädessä olevan aseen voimakkuuteen).
		Vihollisen terveysluku on nyt (vihollisen terveysluku - aiheutettu vahinko).
	Muulloin:
		Aiheutettu vahinko on nyt 0.
	Jos vihollisen terveysluku on enintään 0:
		Vihollisen kädessä oleva ase on nyt nyrkki.
		Toista jokaiselle esineelle (E) vihollisen esineluettelossa:
			Poista E vihollisen esineluettelosta.
			E on nyt vihollisen sijainnissa.
			> TODO: Siirrä viestin tulostaminen jälkeen-sääntöön
			Jos vihollinen on pelaajan ohjaama:
				Sano "Pudotat [e:n].".
			Muulloin:	
				Sano "[Vihollinen] pudottaa [e:n].".
		Vihollinen on nyt kuollut.
		Vihollinen on nyt piilossa.

Ihmistä (vihollinen) vastaan hyökkäämisen jälkeen:
	Jos fokalisoija on pelaajan ohjaama:
		Sano "Lyöt [vihollista] [fokalisoijan kädessä olevalla aseella]!".
		Jos aiheutettu vahinko on 0:
			Sano "[Vihollinen] väistää iskun.".
		Muulloin:
			Sano "Aiheuttamasi vahinko: [aiheutettu vahinko].".
	Muulloin:
		Jos vihollinen on pelaajan ohjaama:
			Sano "[Fokalisoija] lyö sinua [fokalisoijan kädessä olevalla aseella]!".
			Jos aiheutettu vahinko on 0:
				Sano "Väistät iskun.".
			Muulloin:
				Sano "Aiheutettu vahinko: [aiheutettu vahinko].".
		Muulloin:
			Sano "[Fokalisoija] lyö [vihollista] [fokalisoijan kädessä olevalla aseella]!".
			Jos aiheutettu vahinko on 0:
				Sano "[Vihollinen] väistää iskun.".
			Muulloin:
				Sano "Aiheutettu vahinko: [aiheutettu vahinko].".
	
	Jos vihollinen on pelaajan ohjaama:
		Sano "Terveyslukusi: [vihollisen terveysluku].".
	Muulloin:
		Sano "[Vihollisen] terveysluku: [vihollisen terveysluku].".
	
	Jos vihollinen on kuollut:
		Jos vihollinen on pelaajan ohjaama:
			Sano "Olet kuollut.".
			Lopeta peli.
		Muulloin:
			Sano "[Vihollinen] on kuollut.".

>> Viholliset

> Vihollinen on kaikkien tietokoneen ohjaamien vihamielisten hahmojen yläkäsite.

Vihollinen on ihmisen alakäsite.
Vihollinen on yleensä vihamielinen.

Vihollisella on terveyden alarajaksi kutsuttu kokonaisluku.
Vihollisen terveyden alaraja on yleensä 4.

Vihollisella on terveyden ylärajaksi kutsuttu kokonaisluku.
Vihollisen terveyden yläraja on yleensä 10.

Vihollisella on voimakkuuden alarajaksi kutsuttu kokonaisluku.
Vihollisen voimakkuuden alaraja on yleensä 0.

Vihollisella on voimakkuuden ylärajaksi kutsuttu kokonaisluku.
Vihollisen voimakkuuden yläraja on yleensä 3.

>> Vuorot

> Tiettyjen toimintojen (hyökkääminen, liikkuminen, ottaminen) tekeminen vaihtaa vuoron tietokoneelle.
> Tietokoneen vuorolla jokainen vihollinen hyökkää yksi kerrallaan pelaajaa vastaan.

Tietokoneen vuoron pelaaminen on toiminto.
Tietokoneen vuoron pelaamisen komento on "pelaa tietokoneen vuoro".

Tietokoneen vihollinen on ihminen.

Tietokoneen vuoron pelaamisen aikana:
	Tietokoneen vihollinen on nyt fokalisoija.
	Toista jokaiselle tietokoneen ohjaamalle ihmiselle (T) tietokoneen vihollisen sijainnin henkilöjoukossa:
		Sano "[rivinvaihto][rivinvaihto]".
		T fokalisoijana:
			Hyökkää nyt tietokoneen vihollista vastaan.

Huoneeseen siirtymisen jälkeen:
	Jos fokalisoija on pelaajan ohjaama:
		Pelaa tietokoneen vuoro.

Ihmistä vastaan hyökkäämisen jälkeen:
	Jos fokalisoija on pelaajan ohjaama:
		Pelaa tietokoneen vuoro.

Esineen ottamisen jälkeen:
	Jos fokalisoija on pelaajan ohjaama:
		Pelaa tietokoneen vuoro.

> Huoneesta ei voi poistua ennen kuin viholliset on voitettu:

Ennen huoneeseen siirtymistä:
	Jos fokalisoija on pelaajan ohjaama:
		Toista jokaiselle viholliselle (V) fokalisoijan sijainnin henkilöjoukossa:
			Sano "[V] siirtyy eteesi ja estää sinua lähtemästä!".
			Keskeytä toiminto.

>> Herättäminen kuolleista

> Retki-kielellä ei voi helposti luoda uusia olioita, joten on helpointa varata valmiiksi vihollisia.
> Aluksi kaikki viholliset ovat kuolleita, ja näistä osa otetaan mukaan peliin pelaajaa vastaan.
> Kun pelaaja tapaa vihollisia, nämä muuttuvat kuolleiksi ja voidaan taas ottaa myöhemmin mukaan johonkin toiseen kohtaan.
> Prosessia, jossa kuolleita vihollisia otetaan mukaan peliin kutsutaan tässä "kuolleista herättämiseksi".

Määritelmä. Vihollinen on "valmiina", jos:
	hän on kuollut
	hänen nimensä koodissa on "[satunnainen nimi]"

[Vihollisen] kuolleista herättäminen on toiminto.
Vihollisen kuolleista herättämisen komento on "herätä [vihollinen] kuolleista".

Vihollisen kuolleista herättämisen aikana:
	Hänen terveyslukunsa on nyt satunnaisluku välillä hänen terveyden alarajasta hänen terveyden ylärajaan.
	Hänen voimakkuutensa on nyt satunnaisluku välillä hänen voimakkuuden alarajasta hänen voimakkuuden ylärajaan.
	Hän on nyt elävä.
	Hän on nyt näkyvillä.

>>> Tarina

Pelaajan voimakkuus on 4.
Pelaajan nopeus on 5.

>> Tyrmä

Selli on huone.
"Sellissä ei ole yhtään ikkunaa, mikä saa sinut vielä enemmän haluamaan pois."

Ennen pelin alkamista:
	Pelaajan sijainti on nyt selli.
	Pelaaja on nyt näkyvillä.

Tyrmän käytävä on huone sellistä pohjoiseen.
"Käytävän kummallakin puolella on rivissä lukittuja sellejä, jotka kuitenkin ovat kaikki tyhjiä."

Päätyselli on huone tyrmän käytävästä länteen.
"..."

Päätysellin ovi on ovi päätysellin ja tyrmän käytävän välissä.

Pohjoisselli on huone tyrmän käytävästä pohjoiseen.
"..."

Pohjoissellin ovi on ovi pohjoissellin ja tyrmän käytävän välissä.

>> Vartijoiden huone

Vartijoiden huone on huone tyrmän käytävästä itään.
"Öljylampun valo tekee ikkunattomasta huoneesta yllättävän kodikkaan."

Pöytä on kiinteä tukeva sisältäjä vartijoiden huoneessa.
"Vanha puinen pöytä."

Öljylamppu on valaiseva sytytin pöydän päällä.
"Teräksisen öljylampun sisällä palaa kirkas tuli."
Tulkitse "lamppu" öljylamppuna.
Tulkitse "lyhty" öljylamppuna.

Jaska on vihollinen vartijoiden huoneessa.
"Jaska näyttää hieman pelottavalta, isokokoiselta mieheltä. Hänen vyöllään on puukko."
Jaskan terveysluku on 10.
Jaskan voimakkuus on 3.
Jaskan nopeus on 1.

Puukko on ase Jaskan mukana.
"Puukahvainen puukko toimii hyvänä lähiaseena."
Puukon voimakkuus on 3.

Jaana on vihollinen vartijoiden huoneessa.
"Jaanan ilkeä ilme varmistaa pelottaa sinua hieman. Hänen vyöllään on avain."
Jaanan terveysluku on 8.
Jaanan voimakkuus on 2.
Jaanan nopeus on 1.

Tyrmän avain on esine Jaanan mukana.
"Metallinen, melko kevyt avain."
Tulkitse "avain" tyrmän avaimena.
Päätysellin oven avaava avain on tyrmän avain.
Pohjoissellin oven avaava avain on tyrmän avain.

Ruokakomero on huone vartijoiden huoneesta etelään.
"Ahdas, pieni huone, joka toimii vartijoiden ruokavarastona."

Leipä on ruoka-annos ruokakomerossa.
"Kuivanutta ruisleipää, joka on tarkoitettu palvelijoiden käyttöön."
Leivän ruoka-arvo on 3.

Tyrmän porrashuone on huone vartijoiden huoneesta pohjoiseen.
"Valoa kajastaa huoneen keskellä olevien kierreportaiden yläpäästä."

Portaikko on oven alakäsite.
Portaikko on yleensä ei-avattava.
Portaikko on yleensä lukitsematon.

>> Pohjakerros

Pohjakerroksen porrashuone on huone tyrmän porrashuoneesta ylös.
"Huonetta hallitsevat portaat johtavat alas pimeään kellariin ja ylös yläkertaan."

Alempi portaikko on listaamaton portaikko tyrmän porrashuoneen ja pohjakerroksen porrashuoneen välissä.
Tulkitse "porras" alempana portaikkona.

Aula on huone pohjakerroksen porrashuoneesta pohjoiseen.
"Aula yhdistää kartanon itäisen ja läntisen siiven toisiinsa. Katseen vangitsevat yleellinen kattokruunu ja lattiaa peittävä kaunis kuvioitu matto."

Kattokruunu on kiinteä listaamaton esine aulassa.
"Kruunuun on kiinnitetty kahdeksan palavaa valkoista kynttilää."

Matto on tylsä listaamaton esine aulassa.
"Aulan mattoon on kuvioitu tyyliteltyjä puita ja jokia."

Hovimestari on vihollinen aulassa.
"Frakkiin pukeutunut herrasmies on valmis ohjaamaan sinut takaisin selliisi."
Hovimestarin terveysluku on 50.
Hovimestarin voimakkuus on 6.
Hovimestarin nopeus on 3.

>> Länsisiipi

Läntinen käytävä on huone aulasta länteen.
"..."
Tulkitse "käytävä" läntisenä käytävänä.

Ruokahuone on huone läntisestä käytävästä pohjoiseen.
"..."

Ruokapöytä on kiinteä tukeva sisältäjä ruokahuoneessa.
"..."

Keittiö on huone ruokahuoneesta länteen.
"..."

Ruokavarasto on huone ruokahuoneesta pohjoiseen.
"..."

Puutarha on huone keittiöstä länteen.
"..."

Keittiön ovi on ovi keittiön ja puutarhan välissä.
"..."

Piha on huone puutarhasta etelään.
"..."

Puutarhan aita on kiinteä listaamaton esine puutarhassa.
"..."
Tulkitse "aita" puutarhan aitana.
Pihan aita on kiinteä listaamaton esine pihalla.
"..."
Tulkitse "aita" pihan aitana.

Olohuone on huone läntisestä käytävästä länteen.
"Epämukavan näköiset tuolit ja vanhanaikaiset maalaukset vahvistavat käsitystäsi kartanon omistajan huonosta tyylitajusta. Näet ikkunasta pihalle."

Tuoli on tylsä listaamaton esine olohuoneessa.
"Koristeellinen puutuoli samettipehmusteilla näyttää epämukavalta koriste-esineeltä."
Tulkitse "puutuoli" tuolina.

Maalaus on tylsä listaamaton esine olohuoneessa.
"Muotokuvat esittävät kenties kartanon entisiä omistajia."
Tulkitse "muotokuva" maalauksena.

Ikkuna on kiinteä listaamaton esine olohuoneessa.
"Näet ikkunasta pihalle."

Siivouskomero on huone läntisestä käytävästä etelään.
"Erinäiset siivoustarvikkeet täyttävät pienen komeron."

Siivoustarvike on tylsä listaamaton esine siivouskomerossa.
"Siivoustarvikkeet on järjestelty komeron seinille ja lattialle."

>> Itäsiipi

Itäinen käytävä on huone aulasta itään.
"..."

Toimisto on huone itäisestä käytävästä pohjoiseen.
"..."

Arkisto on huone itäisestä käytävästä etelään.
"..."

Varasto on huone itäisestä käytävästä itään.
"..."

>> Pohjoissiipi

Pohjoinen käytävä on huone aulasta pohjoiseen.
"..."

Eteinen on huone pohjoisesta käytävästä pohjoiseen.
"..."

>> Yläkerros

Yläkerroksen porrashuone on huone pohjakerroksen porrashuoneesta ylös.
"Huoneen keskellä olevat portaat johtavat alempiin kerroksiin."

Yläkerroksen aula on huone yläkerroksen porrashuoneesta pohjoiseen.
"..."
Tulkitse "aula" yläkerroksen aulana.

>> Yläkerroksen länsisiipi

Yläkerroksen läntinen käytävä on huone yläkerroksen aulasta länteen.
"..."

Kirjasto on huone yläkerroksen läntisestä käytävästä pohjoiseen.
"..."

Pesutupa on huone yläkerroksen läntisestä käytävästä etelään.
"..."

>> Yläkerroksen itäsiipi

Yläkerroksen itäinen käytävä on huone yläkerroksen aulasta itään.
"..."

Iso makuuhuone on huone yläkerroksen itäisestä käytävästä pohjoiseen.
"..."

Pieni makuuhuone on huone yläkerroksen itäisestä käytävästä itään.
"..."

Vierashuone on huone yläkerroksen itäisestä käytävästä etelään.
"..."

>> Yläkerroksen pohjoissiipi

Yläkerroksen pohjoinen käytävä on huone yläkerroksen aulasta pohjoiseen.
"..."

Pelihuone on huone yläkerroksen pohjoisesta käytävästä pohjoiseen.
"..."
